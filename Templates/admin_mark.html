{% extends 'base.html' %} 

{% block content %}
<div class="card">
    <h3>Teacher's Attendance Register</h3>
    
    <form method="GET" style="margin-bottom: 20px;">
        <label>Select Batch:</label>
        <select name="batch" onchange="this.form.submit()">
            <option value="">-- Select --</option>
            {% for batch in batches %}
            <option value="{{ batch }}" {% if batch == selected_batch %}selected{% endif %}>{{ batch }}</option>
            {% endfor %}
        </select>
    </form>

    {% if students %}
    <form method="POST">
        {% csrf_token %}
        <input type="date" name="date" value="{{ today|date:'Y-m-d' }}">
        
        <table class="table table-bordered">
            <thead>
                <tr><th>ID</th><th>Name</th><th>Mark Status</th></tr>
            </thead>
            <tbody>
                {% for student in students %}
                <tr>
                    <td>{{ student.student_id }}</td>
                    <td>{{ student.user.username }}</td>
<td style="text-align: center;">
    <div class="form-check form-check-inline">
        <input class="form-check-input" type="radio" name="status_{{ student.id }}" id="p_{{ student.id }}" value="Present" checked>
        <label class="form-check-label text-success font-weight-bold" for="p_{{ student.id }}">
            Present
        </label>
    </div>

    <div class="form-check form-check-inline">
        <input class="form-check-input" type="radio" name="status_{{ student.id }}" id="a_{{ student.id }}" value="Absent">
        <label class="form-check-label text-danger font-weight-bold" for="a_{{ student.id }}">
            Absent
        </label>
    </div>

    <div class="form-check form-check-inline">
        <input class="form-check-input" type="radio" name="status_{{ student.id }}" id="l_{{ student.id }}" value="Late">
        <label class="form-check-label text-warning font-weight-bold" for="l_{{ student.id }}">
            Late
        </label>
    </div>
</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
        <button type="submit" class="btn btn-primary">Save Attendance</button>
    </form>
    {% endif %}
</div>
{% endblock %}